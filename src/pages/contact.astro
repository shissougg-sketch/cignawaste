---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import MobileStickyButtons from '../components/MobileStickyButtons.astro';
import QuoteForm from '../components/QuoteForm.astro';
import { PHONE, PHONE_LINK, TEXT_LINK } from '../constants/contact';
import '../styles/global.css';

const phone = PHONE;
const phoneLink = PHONE_LINK;
const textLink = TEXT_LINK;

const serviceAreas = {
  nassau: [
    "Hempstead",
    "North Hempstead",
    "Oyster Bay",
    "Glen Cove",
    "Long Beach",
    "Freeport",
    "Valley Stream",
    "Levittown",
    "Elmont",
    "Franklin Square",
    "Hicksville",
    "Massapequa",
    "Oceanside",
    "Garden City",
    "Mineola",
    "Great Neck",
  ],
  suffolk: [
    "Babylon",
    "Brookhaven",
    "Huntington",
    "Islip",
    "Smithtown",
    "Riverhead",
    "Southampton",
    "East Hampton",
    "Shelter Island",
    "Southold",
    "Bay Shore",
    "Brentwood",
    "Commack",
    "Coram",
    "Deer Park",
    "Patchogue",
  ],
};
---

<BaseLayout
  title="Contact Us | Get a Free Quote | Cigna Recycling & Waste"
  description="Contact Cigna Recycling & Waste for dumpster rentals, demolition, and loading services in Nassau & Suffolk County. Call 631-855-5502 for a free quote."
>
  <Header slot="header" />

  <!-- Hero Section -->
  <section class="bg-cigna-charcoal text-white py-16">
    <div class="container-custom">
      <h1 class="text-4xl md:text-5xl font-heading font-bold mb-4">
        Get Your <span class="text-cigna-yellow">Quote in Minutes</span>
      </h1>
      <p class="text-xl text-gray-300 max-w-2xl">
        Most customers hear back within 2 hours. No obligation, no pressure.
      </p>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="py-16 bg-white">
    <div class="container-custom">
      <div class="grid lg:grid-cols-2 gap-12">
        <!-- Contact Info -->
        <div>
          <h2 class="text-2xl font-heading font-bold text-cigna-charcoal mb-6">
            Contact Us Directly
          </h2>

          <!-- Phone Card -->
          <a
            href={phoneLink}
            class="block bg-cigna-red text-white rounded-xl p-6 mb-4 hover:bg-red-700 transition-colors"
          >
            <div class="flex items-center gap-4">
              <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
                </svg>
              </div>
              <div>
                <p class="text-red-100 text-sm">Call Us</p>
                <p class="text-3xl font-bold">{phone}</p>
                <p class="text-red-100 text-sm">Tap to call now</p>
              </div>
            </div>
          </a>

          <!-- Text Card -->
          <a
            href={textLink}
            class="block bg-cigna-yellow text-cigna-charcoal rounded-xl p-6 mb-8 hover:bg-yellow-400 transition-colors"
          >
            <div class="flex items-center gap-4">
              <div class="w-16 h-16 bg-black/10 rounded-full flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd" />
                </svg>
              </div>
              <div>
                <p class="text-sm opacity-75">Text Us</p>
                <p class="text-2xl font-bold">Text for a Quote</p>
                <p class="text-sm opacity-75">Quick response, even after hours</p>
              </div>
            </div>
          </a>

          <!-- What to Include -->
          <div class="bg-gray-100 rounded-xl p-6">
            <h3 class="font-bold text-cigna-charcoal mb-3">What to Tell Us:</h3>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-cigna-red flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                <span><strong>What you're throwing away</strong> — renovation debris, junk, yard waste, etc.</span>
              </li>
              <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-cigna-red flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                <span><strong>Approximate amount</strong> — room size, number of items, etc.</span>
              </li>
              <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-cigna-red flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                <span><strong>Your location</strong> — town or address</span>
              </li>
              <li class="flex items-start gap-2">
                <svg class="w-5 h-5 text-cigna-red flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                <span><strong>When you need it</strong> — ASAP, specific date, flexible</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- Quote Form -->
        <div>
          <h2 class="text-2xl font-heading font-bold text-cigna-charcoal mb-6">
            Request a Quote Online
          </h2>
          <div class="bg-gray-50 rounded-xl p-6 md:p-8">
            <!-- Success Message (shown after form submission) -->
            <div id="submission-success" class="hidden text-center py-8">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
              </div>
              <h3 class="text-2xl font-bold text-cigna-charcoal mb-2">Quote Request Sent!</h3>
              <p class="text-gray-600 mb-4">Thank you for reaching out. We'll get back to you shortly.</p>
              <p class="text-sm text-gray-500">You can also call us at <a href="tel:+16318555502" class="text-cigna-red font-bold">631-855-5502</a> for immediate assistance.</p>
            </div>
            <!-- Form (hidden after submission) -->
            <div id="quote-form-container">
              <QuoteForm />
            </div>
          </div>
        </div>

        <script>
          if (window.location.search.includes('submitted=true')) {
            const successEl = document.getElementById('submission-success');
            const formContainer = document.getElementById('quote-form-container');
            if (successEl && formContainer) {
              successEl.classList.remove('hidden');
              formContainer.classList.add('hidden');
            }
          }
        </script>
      </div>
    </div>
  </section>

  <!-- Service Areas -->
  <section class="py-12 md:py-16 bg-gray-100">
    <div class="container-custom">
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-heading text-cigna-charcoal text-center mb-3 md:mb-4">
        Our <span class="text-cigna-red">Service Area</span>
      </h2>
      <p class="text-base md:text-lg text-gray-600 text-center mb-8 md:mb-12 max-w-2xl mx-auto">
        Proudly serving all of Nassau and Suffolk County. If you're on Long Island, we've got you covered.
      </p>

      <div class="grid md:grid-cols-2 gap-4 md:gap-8 max-w-4xl mx-auto">
        <!-- Nassau County -->
        <details class="bg-white rounded-xl shadow-md group" open>
          <summary class="p-4 md:p-6 cursor-pointer md:cursor-default list-none flex items-center justify-between">
            <h3 class="text-lg md:text-xl font-bold text-cigna-red flex items-center gap-2">
              <svg class="w-5 h-5 md:w-6 md:h-6" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
              </svg>
              Nassau County
            </h3>
            <svg class="w-5 h-5 text-gray-400 transition-transform group-open:rotate-180 md:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4 md:px-6 md:pb-6 md:pt-0">
            <div class="grid grid-cols-2 gap-x-4 gap-y-1.5 text-sm text-gray-600">
              {serviceAreas.nassau.map((town) => (
                <span class="py-0.5">{town}</span>
              ))}
            </div>
            <p class="text-xs text-gray-400 mt-4 pt-3 border-t border-gray-100">+ all other Nassau County towns</p>
          </div>
        </details>

        <!-- Suffolk County -->
        <details class="bg-white rounded-xl shadow-md group" open>
          <summary class="p-4 md:p-6 cursor-pointer md:cursor-default list-none flex items-center justify-between">
            <h3 class="text-lg md:text-xl font-bold text-cigna-red flex items-center gap-2">
              <svg class="w-5 h-5 md:w-6 md:h-6" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
              </svg>
              Suffolk County
            </h3>
            <svg class="w-5 h-5 text-gray-400 transition-transform group-open:rotate-180 md:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </summary>
          <div class="px-4 pb-4 md:px-6 md:pb-6 md:pt-0">
            <div class="grid grid-cols-2 gap-x-4 gap-y-1.5 text-sm text-gray-600">
              {serviceAreas.suffolk.map((town) => (
                <span class="py-0.5">{town}</span>
              ))}
            </div>
            <p class="text-xs text-gray-400 mt-4 pt-3 border-t border-gray-100">+ all other Suffolk County towns</p>
          </div>
        </details>
      </div>
    </div>
  </section>

  <style>
    /* Hide default details marker */
    details summary::-webkit-details-marker {
      display: none;
    }

    /* On desktop (md+), always show content and disable collapse */
    @media (min-width: 768px) {
      details[open] > summary ~ * {
        display: block !important;
      }
      details > summary {
        pointer-events: none;
      }
    }
  </style>

  <!-- Final CTA -->
  <section class="py-12 bg-cigna-charcoal text-white">
    <div class="container-custom text-center">
      <p class="text-xl mb-4">
        Not sure what you need? <span class="text-cigna-yellow">Just call us.</span>
      </p>
      <p class="text-gray-400 mb-6">
        We'll help you figure out the right dumpster size and services for your project.
      </p>
      <a href={phoneLink} class="btn-primary text-xl">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
          <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
        </svg>
        Call Now — Free Quote
      </a>
    </div>
  </section>

  <Footer slot="footer" />
  <MobileStickyButtons slot="mobile-cta" />
</BaseLayout>
